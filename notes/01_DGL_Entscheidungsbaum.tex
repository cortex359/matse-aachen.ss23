\documentclass{standalone}

\input{header.tex} 

\begin{document}

\begin{tikzpicture}[node distance=1.8cm]
	\tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=red!30]
	\tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium right angle=110, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=blue!30]
	\tikzstyle{process} = [rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=orange!30]
	%\tikzstyle{decision} = [diamond, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=green!30]
	\tikzstyle{decision} = [rectangle, draw, fill=green!30, text centered, rounded corners, text width=5cm]
	
	\tikzstyle{arrow} = [thick,->,>=stealth]



	\node (start) [startstop] {
		DGL + Anfangswert
	};
	\node (explizit) [decision, below of=start] {
		% implizit: keine unabhängigen Variablen, alle auf einer Seite bspw. f(x,y) =0
		explizite Form?\\
		$y' = f\left(x,y\right)$
	};
	\node (nl) [process, right of=explizit, xshift=5.5cm] {
		Nicht (ohne weiteres) lösbar
	};
	\node (ordnung) [decision, below of=explizit] {
		Ordnung der DGL? (höchste Ableitung $y^{(n)}$)
	};

	%%% DGL 2. ORdnung
	\node (secordHomogen) [decision, right of=ordnung, text width=2.6cm, xshift=5cm, yshift=-1.4cm] {
		Homogen?
	};
	
	\node (2ord) [decision, right of=secordHomogen, xshift=5cm, yshift=-1cm, text width=6cm] {
		charakteristische Gleichung $\lambda^2+a\lambda+b = 0$ aufstellen
		$D = \frac{a^2}{4}-b$
	};
	\draw [arrow] (secordHomogen) to[out = 0, in = 180, looseness = 1.5] node[anchor=east] {homogen} (2ord);
	
	\node (varKonst) [process, below of=secordHomogen, xshift=0mm] {
		Variation der Kontanten
	};
	\draw [arrow] (secordHomogen) to[out = 270, in = 90, looseness = 1.5] node[anchor=east] {inhomogen} (varKonst);
	%\node ()

	\node (dgtnull) [process, right of=2ord, text width=4.5cm, xshift=54mm] {
		zwei reelle Nullstellen
		$y(x) = c_1 \e^{\lambda_1 x} + c_2 \e^{\lambda_2 x}$
	};

	\node (deqnull) [process, above of=2ord, text width=6cm, yshift=2mm] {
		eine reelle (doppelte) Nullstelle
		$y(x) = c_1 \e^{\lambda x} + c_2 \cdot x \cdot \e^{\lambda x}$
	};

	\node (dlenull) [process, below of=2ord, text width=6cm, yshift=-5mm] {
		zwei komplexe Nullstellen $\lambda_1 = w + \ct{i}v,\ \lambda_2 = w - \ct{i}v$
		$y(x) = \e^{w x} \cdot \left( c_1 \cos(v x) + c_2 \sin(v x) \right)$
	};

	\draw [arrow] (2ord) -- node[anchor=south] {$D \geq 0$} (dgtnull);
	\draw [arrow] (2ord) -- node[anchor=east] {$D = 0$}    (deqnull);
	\draw [arrow] (2ord) -- node[anchor=east] {$D \leq 0$} (dlenull);


	%% DGLs 1. Ordnung
	\node (separabel) [decision, below of=ordnung] {
		Ist die DGL separabel?
	};
	\node (substitution1) [decision, below of=separabel, text width=5cm] {
		Ist die DGL in der Form\\
		$y'=h(ax + by +c)$?
	};
	\node (substitution2) [decision, below of=substitution1, text width=5cm, yshift=-0.2cm] {
		Ist die DGL in der Form\\
		$y'=h\left(\frac{y}{x}\right)$?
	};
	\node (homogen) [decision, below of=substitution2, text width=7cm] {
		Ist die DGL inhomogen, dh. kommt eine Störfunktion $q(x)\neq 0$ vor?
	};
	\node (inhomogen) [decision, below of=homogen, text width=5cm] {
		Ist die DGL in der Form\\
		$y' = p(x)\cdot y + q(x)$
	};

	\node (bernoulli) [decision, below of=inhomogen, text width=7cm, yshift=-0.4cm] {
		Ist die DGL in der Form\\
		$y' + p(x)y + q(x)\cdot \fbox{ $y^{\alpha}$ } = 0$
		% \alpha \notin \{0, 1\} ergibt sich aus den vorherigen Entscheidungen
	};
	\node (bernoullilgs) [process, right of=bernoulli, xshift=5cm] {
		Bernoulli
	};

	\node (riccati) [decision, below of=bernoulli, text width=7cm, yshift=-0.4cm] {
		Ist die DGL in der Form\\
		$y' = p(x)y + q(x)y^2 +h(x)$
		% \alpha \notin \{0, 1\} ergibt sich aus den vorherigen Entscheidungen
	};
	\node (riccatilgs) [process, right of=riccati, xshift=5cm] {
		Riccati
	};

	\node (partiell) [decision, below of=riccati] {
		Ist die DGL gewöhnlich oder partiell?
	};
	\node (partiell1) [decision, below of=partiell, text width=7cm] {
		Ist die DGL partiell und von der Form
		$P(x,y) + Q(x,y)\cdot y' = 0$
	};
	\draw [arrow] (partiell) -- node[anchor=east] {partiell} (partiell1);

	\node (integrabilitaet) [decision, right of=partiell1, xshift=7cm] {
		Integrabilitätsbedingung erfüllt?
		\[
			\frac{\partial P}{\partial y}(x,y) \questeq \frac{\partial Q}{\partial x}(x,y)
		\]
	};

	\node (integrierenderFaktor) [process, below of=integrabilitaet, yshift=-8mm, text width=50mm] {
		Integrierenden Faktor finden
		\[
			\frac{\frac{\partial P}{\partial y} - \frac{\partial Q}{\partial y}}{P}
		\]
	};
	\draw [arrow] (integrabilitaet) -- node[anchor=east] {nicht erfüllt} (integrierenderFaktor);

	\node (potenzialfunktion) [process, right of=integrabilitaet, xshift=54mm] {
		Potenzialfunktion $F(x,y)$ bestimmen
	};
	\draw [arrow] (integrabilitaet) -- node[anchor=north]  {erfüllt} (potenzialfunktion);
	\draw [arrow] (integrierenderFaktor) to[out = 0, in = 270, looseness = 1.0] node[anchor=north] {
		neue IB prüfen
	} (potenzialfunktion);
	

	\node (partiell2) [decision, below of=partiell1, text width=7cm] {
		Ist die DGL partiell und von der Form?
		$P(x,y) + Q(x,y)\cdot y' = f(x)$
	};

	\draw [arrow] (start)         -- (explizit);
	\draw [arrow] (explizit)      -- node[anchor=east]  {Ja}  	  (ordnung);
	\draw [arrow] (explizit) 	  -- node[anchor=north] {Nein}    (nl);
	\draw [arrow] (ordnung)       -- node[anchor=east]  {1. Ord.} (separabel);
	\draw [arrow] (ordnung) to[out = 0, in = 180, looseness = 1.5] node[anchor=east] {2. Ord.} (secordHomogen);
	\draw [arrow] (ordnung) to[out = 0, in = 270, looseness = 1] node[anchor=south] {n > 2}   (nl);
	\draw [arrow] (separabel) 	  -- node[anchor=east]  {Nein} 	  (substitution1);
	\draw [arrow] (substitution1) -- node[anchor=east]  {Nein} 	  (substitution2);
	\draw [arrow] (substitution2) -- node[anchor=east]  {Nein} 	  (homogen);
	\draw [arrow] (homogen) 	  -- node[anchor=east]  {Ja}      (inhomogen);
	\draw [arrow] (inhomogen)     -- node[anchor=east]  {Nein}    (bernoulli);
	\draw [arrow] (bernoulli)     -- node[anchor=north] {Ja}      (bernoullilgs);
	\draw [arrow] (bernoulli)     -- node[anchor=east]  {Nein}    (riccati);
	\draw [arrow] (riccati)       -- node[anchor=north] {Ja}      (riccatilgs);
	\draw [arrow] (riccati)       -- node[anchor=east]  {Nein}    (partiell);
	\draw [arrow] (partiell1)     -- node[anchor=east]  {Nein}    (partiell2);
	\draw [arrow] (partiell1)     -- node[anchor=north] {Ja}      (integrabilitaet);
\end{tikzpicture}


\end{document}